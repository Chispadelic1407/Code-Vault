<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Vault - Optimized</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        // This is a simplified version for testing the optimized structure
        // In a real implementation, you would use proper module bundling
        
        const { useState, useEffect, useRef, useCallback, useMemo } = React;
        const { Folder, Sparkles, Loader2, FileText, Plus, Download, Edit, Trash2, Upload, Box, Bot, Send, User, X, Save, Server } = lucide;
        
        // Mock components for testing
        const ProjectSidebar = ({ projects, selectedProjectId, onProjectSelect, onCreateProject, onDeleteProject }) => (
            React.createElement('aside', {
                className: "w-1/4 min-w-[280px] bg-gray-800/50 backdrop-blur-sm p-4 flex flex-col rounded-l-lg border-r border-gray-700"
            },
                React.createElement('h2', {
                    className: "text-xl font-bold mb-4 text-white flex items-center gap-2"
                }, 
                    React.createElement(Server, { className: "text-cyan-400", size: 20 }),
                    " Projects"
                ),
                React.createElement('button', {
                    onClick: onCreateProject,
                    className: "w-full mb-4 bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 transition-colors"
                },
                    React.createElement(Plus, { size: 18 }),
                    " New Project"
                ),
                React.createElement('div', {
                    className: "flex-grow overflow-y-auto"
                },
                    projects.length === 0 ? 
                        React.createElement('div', {
                            className: "text-center text-gray-400 mt-8"
                        },
                            React.createElement(Folder, { size: 48, className: "mx-auto mb-4 opacity-50" }),
                            React.createElement('p', null, "No projects yet"),
                            React.createElement('p', { className: "text-sm" }, "Create your first project to get started")
                        ) :
                        React.createElement('div', { className: "space-y-2" },
                            projects.map(project => 
                                React.createElement('div', {
                                    key: project.id,
                                    className: `p-3 rounded-lg cursor-pointer transition-colors flex items-center justify-between group ${
                                        selectedProjectId === project.id 
                                            ? 'bg-cyan-600 text-white' 
                                            : 'bg-gray-700 hover:bg-gray-600 text-gray-300'
                                    }`,
                                    onClick: () => onProjectSelect(project.id)
                                },
                                    React.createElement('div', {
                                        className: "flex items-center gap-2 min-w-0"
                                    },
                                        React.createElement(Folder, { size: 16 }),
                                        React.createElement('span', { className: "truncate" }, project.name)
                                    ),
                                    React.createElement('button', {
                                        onClick: (e) => {
                                            e.stopPropagation();
                                            onDeleteProject(project.id);
                                        },
                                        className: "opacity-0 group-hover:opacity-100 p-1 hover:bg-red-600 rounded transition-all"
                                    },
                                        React.createElement(Trash2, { size: 14 })
                                    )
                                )
                            )
                        )
                )
            )
        );

        const FileView = ({ files, selectedProjectId, projects }) => (
            React.createElement('div', {
                className: "p-6 h-full flex flex-col"
            },
                !selectedProjectId ? 
                    React.createElement('div', {
                        className: "flex flex-col items-center justify-center h-full text-gray-500"
                    },
                        React.createElement(FileText, { size: 64, className: "mb-4 opacity-50" }),
                        React.createElement('h3', { className: "text-xl font-semibold mb-2" }, "No Project Selected"),
                        React.createElement('p', null, "Select a project from the sidebar to view its files")
                    ) :
                    React.createElement('div', null,
                        React.createElement('h2', {
                            className: "text-2xl font-bold text-white mb-6"
                        }, projects.find(p => p.id === selectedProjectId)?.name || 'Project Files'),
                        files.length === 0 ?
                            React.createElement('div', {
                                className: "flex flex-col items-center justify-center h-full text-gray-500 pt-16"
                            },
                                React.createElement(FileText, { size: 48 }),
                                React.createElement('p', { className: "mt-4 text-lg" }, "This project is empty."),
                                React.createElement('p', { className: "text-sm" }, "You can upload existing files or create them from scratch.")
                            ) :
                            React.createElement('div', {
                                className: "text-gray-300"
                            }, `${files.length} files in this project`)
                    )
            )
        );

        const AICoderView = () => (
            React.createElement('div', {
                className: "p-6 h-full flex flex-col"
            },
                React.createElement('h2', {
                    className: "text-2xl font-bold mb-4 text-white flex items-center gap-2"
                },
                    React.createElement(Bot, { size: 24, className: "text-indigo-400" }),
                    " AI Assistant"
                ),
                React.createElement('div', {
                    className: "flex flex-col items-center justify-center h-full text-gray-400"
                },
                    React.createElement(Bot, { size: 48, className: "mb-4 opacity-50" }),
                    React.createElement('p', { className: "text-center" }, "Select a file and ask me anything about your code!"),
                    React.createElement('p', { className: "text-sm text-center mt-2 opacity-75" }, "I can help with debugging, optimization, explanations, and more.")
                )
            )
        );

        // Main App Component
        const App = () => {
            const [isLoading, setIsLoading] = useState(true);
            const [projects, setProjects] = useState([]);
            const [files, setFiles] = useState([]);
            const [selectedProjectId, setSelectedProjectId] = useState(null);
            const [activeTab, setActiveTab] = useState('files');

            useEffect(() => {
                setTimeout(() => setIsLoading(false), 1000);
            }, []);

            const handleCreateProject = () => {
                const name = prompt('Enter project name:');
                if (name) {
                    const newProject = {
                        id: `project-${Date.now()}`,
                        name,
                        createdAt: new Date()
                    };
                    setProjects(prev => [...prev, newProject]);
                    setSelectedProjectId(newProject.id);
                }
            };

            const handleDeleteProject = (projectId) => {
                if (confirm('Are you sure you want to delete this project?')) {
                    setProjects(prev => prev.filter(p => p.id !== projectId));
                    if (selectedProjectId === projectId) {
                        setSelectedProjectId(null);
                    }
                }
            };

            const currentProjectFiles = useMemo(() => {
                return files.filter(file => file.projectId === selectedProjectId);
            }, [files, selectedProjectId]);

            if (isLoading) {
                return React.createElement('div', {
                    className: "h-screen w-full flex flex-col items-center justify-center bg-gray-900 text-white"
                },
                    React.createElement(Loader2, { className: "animate-spin text-cyan-400", size: 48 }),
                    React.createElement('p', { className: "mt-4 text-lg" }, "Loading Code Vault...")
                );
            }

            return React.createElement('div', {
                className: "h-screen w-full bg-gray-900 text-white font-sans flex flex-col items-center justify-center p-4"
            },
                React.createElement('main', {
                    className: "w-full h-full max-w-7xl bg-gray-800/20 rounded-lg shadow-2xl flex flex-col relative overflow-hidden border border-gray-700"
                },
                    React.createElement('div', {
                        className: "flex border-b border-gray-700 shrink-0"
                    },
                        React.createElement('button', {
                            onClick: () => setActiveTab('files'),
                            className: `py-2 px-4 flex items-center gap-2 font-medium transition-colors ${
                                activeTab === 'files' 
                                    ? 'text-cyan-400 border-b-2 border-cyan-400' 
                                    : 'text-gray-400 hover:text-white'
                            }`
                        },
                            React.createElement(Folder, { size: 16 }),
                            " My Files"
                        ),
                        React.createElement('button', {
                            onClick: () => setActiveTab('ai'),
                            className: `py-2 px-4 flex items-center gap-2 font-medium transition-colors ${
                                activeTab === 'ai' 
                                    ? 'text-indigo-400 border-b-2 border-indigo-400' 
                                    : 'text-gray-400 hover:text-white'
                            }`
                        },
                            React.createElement(Sparkles, { size: 16 }),
                            " AI Assistant"
                        )
                    ),
                    React.createElement('div', {
                        className: "flex flex-grow overflow-hidden"
                    },
                        React.createElement(ProjectSidebar, {
                            projects,
                            selectedProjectId,
                            onProjectSelect: setSelectedProjectId,
                            onCreateProject: handleCreateProject,
                            onDeleteProject: handleDeleteProject
                        }),
                        React.createElement('div', {
                            className: "flex-grow relative"
                        },
                            activeTab === 'files' && React.createElement(FileView, {
                                files: currentProjectFiles,
                                selectedProjectId,
                                projects
                            }),
                            activeTab === 'ai' && React.createElement(AICoderView)
                        )
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(App), document.getElementById('root'));
    </script>
</body>
</html>
